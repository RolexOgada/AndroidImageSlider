plugins {
    id 'com.android.library'
    id 'maven-publish'
}

android {
    namespace 'com.rolex.slider.library'
    compileSdk 36

    defaultConfig {
        minSdk 21
        targetSdk 36
        versionCode 15
        versionName "1.1.5"
    }

    buildTypes {
        release {
            minifyEnabled true
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
        debug {
            minifyEnabled false
        }
    }

    lint {
        abortOnError false
    }

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_17
        targetCompatibility JavaVersion.VERSION_17
    }
}

dependencies {
    implementation fileTree(dir: 'libs', include: ['*.jar'])
    implementation 'androidx.appcompat:appcompat:1.7.1'
    implementation 'androidx.core:core-ktx:1.17.0'
    implementation 'com.squareup.picasso:picasso:2.71828'
    implementation 'com.nineoldandroids:library:2.4.0'
}

// Maven Publish Configuration
afterEvaluate {
    publishing {
        publications {
            release(MavenPublication) {
                // Use release build output
                from components.findByName('release')

                // Explicitly add the .aar file from libs directory
                artifact("$buildDir/outputs/aar/${project.name}-release.aar") {
                    builtBy tasks.named("assembleRelease")
                }

                groupId = 'com.github.RolexOgada'
                artifactId = 'AndroidImageSlider'
                version = '1.0.3'

                pom {
                    name.set("RolexCore Library")
                    description.set("A library for core functionality in Rolex projects")
                    url.set("https://github.com/RolexOgada/AndroidImageSlider")
                    licenses {
                        license {
                            name.set("MIT License")
                            url.set("https://opensource.org/licenses/MIT")
                        }
                    }
                    developers {
                        developer {
                            id.set("rolexogada")
                            name.set("Rolex Ogada")
                            email.set("rolexogada@gmail.com")
                        }
                    }
                    scm {
                        connection.set("scm:git:git://github.com/RolexOgada/AndroidImageSlider.git")
                        developerConnection.set("scm:git:ssh://git@github.com/RolexOgada/AndroidImageSlider.git")
                        url.set("https://github.com/RolexOgada/AndroidImageSlider")
                    }
                }
            }
        }
    }
}

// Ensure assembleRelease is triggered during JitPack build
tasks.configureEach { task ->
    if (task.name == "assemble") {
        task.dependsOn assembleRelease
    }
}




//plugins {
//    id 'com.android.library'
//    id 'maven-publish'
//}
//
//android {
//    namespace 'com.rolex.slider.library'
//    compileSdk 36
//
//    defaultConfig {
//        minSdk 21
//        targetSdk 36
//        versionCode 15
//        versionName "1.1.5"
//    }
//
//    buildTypes {
//        release {
//            minifyEnabled true
//            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
//        }
//        debug {
//            minifyEnabled false
//        }
//    }
//
//    lint {
//        abortOnError false
//    }
//
//    // ✅ Keep only ONE compileOptions block (Java 17 supports modern syntax)
//    compileOptions {
//        sourceCompatibility JavaVersion.VERSION_17
//        targetCompatibility JavaVersion.VERSION_17
//    }
//
//    // ✅ If you ever add Kotlin later, uncomment below
//    // kotlinOptions {
//    //     jvmTarget = "17"
//    // }
//}
//
//dependencies {
//    implementation fileTree(dir: 'libs', include: ['*.jar'])
//
//    // AndroidX dependencies
//    implementation 'androidx.appcompat:appcompat:1.7.1'
//    implementation 'androidx.core:core-ktx:1.17.0'
//
//    // Picasso (image loader)
//    implementation 'com.squareup.picasso:picasso:2.71828'
//
//    // Animations (legacy)
//    implementation 'com.nineoldandroids:library:2.4.0'
//}
//
////apply from: './gradle-mvn-push.gradle'
//
// //Maven Publish Configuration
////afterEvaluate {
////    publishing {
////        publications {
////            release(MavenPublication) {
////                // Use release build output
////                from components.findByName('release')
////
////                // Explicitly add the .aar file from libs directory
////                artifact("lib/rolexecore-release.aar") {
////                    builtBy tasks.named("assembleRelease")
////                }
////
////                groupId = 'com.collince'
////                artifactId = 'rolexcore'
////                version = '1.0.0'
////
////                pom {
////                    name.set("RolexCore Library")
////                    description.set("A library for core functionality in Rolex projects")
////                    url.set("https://github.com/RolexOgada/AndroidImageSlider")
////                    licenses {
////                        license {
////                            name.set("MIT License")
////                            url.set("https://opensource.org/licenses/MIT")
////                        }
////                    }
////                    developers {
////                        developer {
////                            id.set("rolexogada")
////                            name.set("Rolex Ogada")
////                            email.set("rolexogada@gmail.com")
////                        }
////                    }
////                    scm {
////                        connection.set("scm:git:git://github.com/RolexOgada/AndroidImageSlider.git")
////                        developerConnection.set("scm:git:ssh://git@github.com/RolexOgada/AndroidImageSlider.git")
////                        url.set("https://github.com/RolexOgada/AndroidImageSlider")
////                    }
////
////                }
////            }
////        }
////    }
////}
//
//
//
//// Ensure assembleRelease is triggered during JitPack build
//
//plugins {
//    id 'com.android.library'
//    id 'maven-publish'
//}
//
//android {
//    namespace 'com.rolex.slider.library'
//    compileSdk 36
//
//    defaultConfig {
//        minSdk 21
//        targetSdk 36
//        versionCode 15
//        versionName "1.1.5"
//    }
//
//    buildTypes {
//        release {
//            minifyEnabled true
//            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
//        }
//        debug {
//            minifyEnabled false
//        }
//    }
//
//    lint {
//        abortOnError false
//    }
//
//    compileOptions {
//        sourceCompatibility JavaVersion.VERSION_17
//        targetCompatibility JavaVersion.VERSION_17
//    }
//}
//
//dependencies {
//    implementation fileTree(dir: 'libs', include: ['*.jar'])
//
//    implementation 'androidx.appcompat:appcompat:1.7.1'
//    implementation 'androidx.core:core-ktx:1.17.0'
//    implementation 'com.squareup.picasso:picasso:2.71828'
//    implementation 'com.nineoldandroids:library:2.4.0'
//}
//
//// ✅ Maven Publish Configuration
//afterEvaluate {
//    publishing {
//        publications {
//            release(MavenPublication) {
//                from components.findByName('release')
//
//                groupId = 'com.github.RolexOgada'
//                artifactId = 'AndroidImageSlider'
//                version = '1.1.5'
//
//                pom {
//                    name.set("AndroidImageSlider")
//                    description.set("A modernized version of the Daimajia Android Image Slider library")
//                    url.set("https://github.com/RolexOgada/AndroidImageSlider")
//
//                    licenses {
//                        license {
//                            name.set("MIT License")
//                            url.set("https://opensource.org/licenses/MIT")
//                        }
//                    }
//                    developers {
//                        developer {
//                            id.set("rolexogada")
//                            name.set("Rolex Ogada")
//                            email.set("rolexogada@gmail.com")
//                        }
//                    }
//                    scm {
//                        connection.set("scm:git:git://github.com/RolexOgada/AndroidImageSlider.git")
//                        developerConnection.set("scm:git:ssh://git@github.com/RolexOgada/AndroidImageSlider.git")
//                        url.set("https://github.com/RolexOgada/AndroidImageSlider")
//                    }
//                }
//            }
//        }
//    }
//}
//
//tasks.configureEach { task ->
//    if (task.name == "assemble") {
//        task.dependsOn assembleRelease
//    }
//}
